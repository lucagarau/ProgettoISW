<head>
    <title>Rifugio del Gatto Bosisio</title>
    {% load static %} <!--carica i file statici-->
    {% load bootstrap5 %}
    {% bootstrap_css %}
    <style>

      .titolo{
        width: 100vw;
      }

      .hide-disabled{
        display: none;
      }
    </style>
    {% bootstrap_javascript %}
    <link rel="stylesheet" href="{% static 'style.css' %}"> <!--carica il file css-->
</head>

<body>
    
  <header class="bg-secondary bg-gradient text-white">
    <div class=" container text-center">
      <div class="row align-items-center">
        <div class="col">
          
        </div>
        <div class="col-9">
          <h1 class="text-center m-3">Benvenuto nel rifugio del Gatto bosisio</h1>
        </div>
        <div class="col justify-content-right">
          <a class="end-0 btn btn-primary" href="/logout" role="button" id="Logout">Logout</a>
        </div>
      </div>
    </div>
  </header>
  <div class="container mt-3 text-center">
    <div class="row align-items-center">
      <div class="col"> <!--Prima colonna-->

        <!--Tasto Filtra-->
        <div class="align-items-center btn-group">
          <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" id="filtra">Filtra</button>
          <ul class="dropdown-menu" style="min-width:300px;">
            <form method="get" id = "filter-form">
              {{ lista_filtrata.form.as_ul }}
              <input type="submit" class ="btn btn-outline-success"/>
            </form>
          </ul>
        </div>

      </div>
      <div class="col-9 text-center"> <!--Seconda colonna-->
        <!--Titolo Pagina-->
        <h2 class="text-center">I Nostri Animali da Adottare</h2>
      </div>
      <div class="col"> <!--Terza colonna-->
        
      </div>
    </div>
  </div>
  <!--Testo avviso Centrato-->
  <div class="row">
    <div class="col-sm-12 center">
      <h3 class="text-center m-3" id="warning">Non ci sono animali</h3>
    </div>
  </div>
    


        <!--INIZIO NONTOCCARE-->
        {% if lista_animali %}
            <div class="p-4">
            <table class="table table-bordered table-sm table-responsive">
                <thead>
                    <tr class="table-primary">
                        <th>Specie</th>
                        <th>Razza</th>
                        <th>Et√†</th>
                        <th>descrizione</th>
                        <th>Azione</th>
                    </tr>
                </thead>
                
                <tbody>
                    {% for animali in lista_filtrata.qs %}
                      {% if animali.stato == "NON_ADOTTATO"%}
                        <tr class="table-light">
                            <td>{{ animali.specie }}</td>
                            <td>{{ animali.razza }}</td>
                            <td>{{ animali.eta }}</td>
                            <td>{{ animali.descrizione }}</td>
                            <td><a href="/modulo_adozione/{{ animali.id }}/" >Adotta</a></td> 
                            
                        </tr>
                      {% endif %}
                    {% endfor %}
                </tbody>

            </table>
          <script>
            //Attiva il pulsante filtra quando ci sono animali
            //TODO da testare in caso prima non ci siano animali e poi ci siano e viceversa
            var filtra = document.getElementById('filtra');
            var message = document.getElementById('warning');
            message.classList.add('hide-disabled');
            filtra.classList.remove('hide-disabled');
          </script>
        {% else %}
          <script>
            //Disattiva il pulsante filtra quando non ci sono animali
            var filtra = document.getElementById('filtra');
            var message = document.getElementById('warning');
            message.classList.remove('hide-disabled');
            filtra.classList.add('hide-disabled');
          </script>
        {% endif %}
        <!--FINE NONTOCCARE-->

        
  
</body>