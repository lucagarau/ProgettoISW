<head>
    <title>Rifugio del Gatto Bosisio - admim</title>
    {% load static %}
    {% load bootstrap5 %}
    {% bootstrap_css %}
    <style>

      #titolo{
        width: 100vw;
      }

      .hide-disabled{
        display: none;
      }
    </style>
    {% bootstrap_javascript %}
</head>

<body>
    


  <header class="p-3 mb-2 bg-secondary bg-gradient text-white d-flex">
    <div class="row h-100 justify-content-center align-items-center" id="titolo">
      <h1 class="text-center m-3">Benvenuto nel rifugio del Gatto bosisio</h1>
    </div>
    <a class="btn btn-primary" href="/logout" role="button">Logout</a>
  </header>


    <div class="container" style="width: 100vw;">
      <div class="row">
        <div class="col">
          <div class=" position-absolute start-0 p-3 btn-group">
            <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" id="filtra">Filtra</button>
            <ul class="dropdown-menu" style="min-width:300px;">
              <li><nav class="navbar bg-body-tertiary">
                  <div class="container-fluid">
                    <form class="d-flex" role="search">
                      <!--input e bottone Eta-->  
                      <input class="form-control me-2" type="ageSearch" placeholder="Età" aria-label="Età">
                      <button class="btn btn-outline-success" type="submit">Search</button>
                    </form>
                  </div>
                </nav>
              </li>
              <li><nav class="navbar bg-body-tertiary">
                  <div class="container-fluid">
                    <form class="d-flex" role="search">
                      <!--input e bottone Specie-->
                      <input class="form-control me-2" type="speciesSearch" placeholder="Specie" aria-label="Specie">
                      <button class="btn btn-outline-success" type="submit">Search</button>
                    </form>
                  </div>
                </nav>
              </li>
              <li><nav class="navbar bg-body-tertiary">
                  <div class="container-fluid">
                    <form class="d-flex" role="search">
                      <!--input e bottone Razza-->
                      <input class="form-control me-2" type="raceSearch" placeholder="Razza" aria-label="Razza">
                      <button class="btn btn-outline-success" type="submit">Search</button>
                    </form>
                  </div>
                </nav>
              </li>
            </ul>
          </div>
        </div>
        <div class="col text-center align-content-center">
          <h2 class="text-center">Lista Richieste</h2>
        </div>
        <div class="col">
          <a href="#" role="button" class=" position-absolute end-0 btn btn-warning m-3" onclick="location.href= '/gestione_animali/' ">Gestisci Animali</a>
        </div>
      </div>
    </div>

    <div class="row justify-content-center" style="width: 100vw;">
      <h3 class="text-center m-3" id="warning">Non ci sono richieste</h3>
    </div>


        <!--INIZIO NONTOCCARE-->
        {% if lista_moduli %}
                    
            <div class="p-4">
            <table class="table table-bordered table-sm table-responsive">
                <thead>
                    <tr class="table-primary">
                        <th>Richiedente</th>
                        <th>Indirizzo</th>
                        <th>Recapito</th>
                        <th>Specie Animale</th>
                        <th>Razza Animale</th>
                        <th>Età Animale</th>
                        <th>Azione</th>
                    </tr>
                </thead>
                
                <tbody>
                    {% for modulo_adozione in lista_moduli %}
                        <tr class="table-light">
                            <td>{{ modulo_adozione.nomeCognome }}</td>
                            <td>{{ modulo_adozione.indirizzo }}</td>
                            <td>{{ modulo_adozione.recapito }}</td>
                            <td>{{ modulo_adozione.animale.specie }}</td>
                            <td>{{ modulo_adozione.animale.razza }}</td>
                            <td>{{ modulo_adozione.animale.eta }}</td>
                            <td><a href="/gestione_modulo_adozione/{{modulo_adozione.id}}/1/">Accetta    </a><a href="/gestione_modulo_adozione/{{modulo_adozione.id}}/0/">Rifiuta</a></td> 
                            
                        </tr>
                    {% endfor %}
                </tbody>

            </table>
            <script>
              //Attiva il pulsante filtra quando ci sono animali
              //TODO da testare in caso prima non ci siano richieste e poi ci siano e viceversa
              var filtra = document.getElementById('filtra');
              var message = document.getElementById('warning');
              message.classList.add('hide-disabled');
              filtra.classList.remove('hide-disabled');
            </script>
        {% else %}
          <script>
            //Disattiva il pulsante filtra quando non ci sono richieste
            var filtra = document.getElementById('filtra');
            var message = document.getElementById('warning');
            message.classList.remove('hide-disabled');
            filtra.classList.add('hide-disabled');
          </script>
        {% endif %}
        <!--FINE NONTOCCARE-->

</body>